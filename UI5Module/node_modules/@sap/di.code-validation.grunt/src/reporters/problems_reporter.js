var fs = require("fs");

module.exports = {

    report: function (result, reporterOptions) {
        var fullRestuls;
        if (fs.existsSync(reporterOptions.outputFile)) {
            try{
                fullRestuls = JSON.parse(fs.readFileSync(reporterOptions.outputFile, 'utf8'));
                fullRestuls.results = fullRestuls.results || {};
                for (var key in result) {
                    fullRestuls.results[key] = result[key]
                }
            }
            catch(e) {};
        } else {
            fullRestuls = {version: "1.0.0", "results": result};
        }
        fs.writeFileSync(reporterOptions.outputFile, JSON.stringify(fullRestuls));
    }
};